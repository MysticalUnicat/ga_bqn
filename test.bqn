âŸ¨ Algebra âŸ© â† â€¢Import "geometric_algebra.bqn"

{ğ•¤
  ga â† Algebra 2â€¿0â€¿1
  
  e0 â† ga.E 0
  e1 â† ga.E 1
  e2 â† ga.E 2
  e01 â† ga.E 0â€¿1
  e02 â† ga.E 0â€¿2
  e12 â† ga.E 1â€¿2
  e012 â† ga.E 0â€¿1â€¿2

  ! âˆ§Â´ e0   = 0â€¿1â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0
  ! âˆ§Â´ e1   = 0â€¿0â€¿1â€¿0â€¿0â€¿0â€¿0â€¿0
  ! âˆ§Â´ e2   = 0â€¿0â€¿0â€¿1â€¿0â€¿0â€¿0â€¿0
  ! âˆ§Â´ e01  = 0â€¿0â€¿0â€¿0â€¿1â€¿0â€¿0â€¿0
  ! âˆ§Â´ e02  = 0â€¿0â€¿0â€¿0â€¿0â€¿1â€¿0â€¿0
  ! âˆ§Â´ e12  = 0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿1â€¿0
  ! âˆ§Â´ e012 = 0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿1

  Point â† {xâ€¿y: +Â´ xâ€¿yâ€¿1 Ã— e02â€¿e01â€¿e12}

  p0 â† PointâŸ¨1, 2âŸ©
  ! âˆ§Â´ p0 = 0â€¿0â€¿0â€¿0â€¿2â€¿1â€¿1â€¿0
  ! âˆ§Â´ (2 ga.GeometricProduct p0) = 0â€¿0â€¿0â€¿0â€¿4â€¿2â€¿2â€¿0
  ! âˆ§Â´ (p0 ga.GeometricProduct p0) = Â¯1â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0
} @

#----------------------------------------------------------
# 3d pga example
ga â† Algebra 3â€¿0â€¿1

e0 â† ga.E 0
e1 â† ga.E 1
e2 â† ga.E 2
e3 â† ga.E 3

Rotor â† {angleâ€¿line:
  a â† angle Ã· 2
  c â† â€¢math.Cos a
  s â† â€¢math.Sin a
  c ga.Add s Ã— line
}

Translator â† {distâ€¿line:
  1 ga.Add (dist Ã· 2) Ã— line
}

Plane â† {aâ€¿bâ€¿câ€¿d : +Â´ aâ€¿bâ€¿câ€¿d Ã— e1â€¿e2â€¿e3â€¿e0}

e123 â† ga.E 1â€¿2â€¿3
e032 â† ga.E 0â€¿3â€¿2
e013 â† ga.E 0â€¿1â€¿3
e021 â† ga.E 0â€¿2â€¿1

Point â† {xâ€¿yâ€¿z: +Â´ xâ€¿yâ€¿zâ€¿1 Ã— e032â€¿e013â€¿e021â€¿e123}

Circle â† {tâ€¿radiusâ€¿line:
  (RotorâŸ¨t Ã— 2 Ã— Ï€, lineâŸ©) ga.GeometricProduct TranslatorâŸ¨radius, e1 ga.GeometricProduct e0âŸ©
}

Torus â† {sâ€¿tâ€¿r1â€¿l1â€¿r2â€¿l2:
  (CircleâŸ¨s, r2, l2âŸ©) ga.GeometricProduct CircleâŸ¨t, r1, l1âŸ©
}

PointOnTorus â† {sâ€¿t:
  to â† TorusâŸ¨s, t, 0.25, e1 ga.GeometricProduct e2, 0.6, e1 ga.GeometricProduct e3âŸ©
  to ga.Sandwich e123
}

rot â† RotorâŸ¨Ï€ Ã· 2, e1 ga.GeometricProduct e2âŸ©

ax_z â† e1 ga.ExteriorProduct e2

orig â† ax_z ga.ExteriorProduct e3

px â† PointâŸ¨1, 0, 0âŸ©
line â† orig ga.RegressiveProduct px

p â† PlaneâŸ¨2, 0, 1, Â¯3âŸ©

rotated_plane â† rot ga.Sandwich p
rotated_line â† rot ga.Sandwich line
rotated_point â† rot ga.Sandwich px

point_on_plane â† (p ga.InnerProduct px) ga.GeometricProduct p

â€¢Out "a point        : " âˆ¾ ga.Log px
â€¢Out "a line         : " âˆ¾ ga.Log line
â€¢Out "a plane        : " âˆ¾ ga.Log p
â€¢Out "a rotor        : " âˆ¾ ga.Log rot
â€¢Out "rotated line   : " âˆ¾ ga.Log rotated_line
â€¢Out "rotated point  : " âˆ¾ ga.Log rotated_point
â€¢Out "rotated_plane  : " âˆ¾ ga.Log rotated_plane
â€¢Out "point on plane : " âˆ¾ ga.Log ga.Normalize point_on_plane
â€¢Out "point on torus : " âˆ¾ ga.Log PointOnTorusâŸ¨0, 0âŸ©
â€¢Out ga.Log (e0 ga.Subtract 1)
â€¢Out ga.Log (1 ga.Subtract e0)

