âŸ¨ _geometricAlgebra âŸ©â‡

_geometricAlgebra â† {
  pâ€¿qâ€¿r â† ğ•—

  tot â† +Â´ ğ•—

  ngrades â† 1+tot
  nbasis â† 2â‹†tot
  metric â† râ€¿pâ€¿q/0â€¿1â€¿Â¯1

  ToBinary â† 2{âŒ½ğ•—|âŒŠâˆ˜Ã·âŸœğ•—âŸ(â†•1+Â·âŒŠğ•—â‹†â¼1âŒˆâŠ¢)} # from bqncrate

  basis_bits â† (â‹+Â´Â¨)âŠ¸âŠ { âŒ½ (-tot)â†‘ ToBinary }Â¨ â†•nbasis
  basis_name â† { â‹âŠ¸âŠ (â†•tot)/Ëœ ğ•© }Â¨ basis_bits
  basis_grade â† +Â´Â¨ basis_bits
  basis_metric â† 1 <âŠ¸âˆ¾ metric âˆ¾ Â¯1Ã—{Ã—Â´metric/Ëœğ•©}Â¨(tot+1)â†“basis_bits

  MulBasis â† {
    0 ğ•Š 0 : 0 ;
    a â† >ğ•¨âŠ‘basis_bits
    b â† >ğ•©âŠ‘basis_bits
    +Â´(aâ‰ b)Ã—2â‹†â†•tot
  }

  MulSign â† {
    0 ğ•Š 0 : 1 ;
    an â† ğ•¨âŠ‘basis_name
    bn â† ğ•©âŠ‘basis_name
    Â¯1â‹†+Â´ an ( +Â´â‰1 <âŒœ ) bn
  }

  cayley_basis â† MulBasisâŒœËœ â†•nbasis
  cayley_sign â† MulSignâŒœËœ â†•nbasis

  ToMV â‡ nbasisâŠ¸â†‘

  _gradeNegate â‡ {((4|basis_grade) âŠ ğ•—) Ã— ğ•©}

  _grade â‡ {(ğ•—=basis_grade)/ToMV}
  Reverse â‡ 1â€¿1â€¿Â¯1â€¿Â¯1 _gradeNegate
  Involute â‡ 1â€¿Â¯1â€¿1â€¿Â¯1 _gradeNegate
  Conjugate â‡ 1â€¿Â¯1â€¿Â¯1â€¿1 _gradeNegate

  HodgeDual â‡ {âŒ½â—‹ToMVğ•©}
  
  Dual â‡ r=0â—¶HodgeDualâ€¿{(-nbasis)â†‘1Ã—ğ•©}
  
  Mul â‡ {+Â´â‰1 cayley_sign Ã— (cayley_basisâŠğ•©) Ã—â‰1 ğ•¨}â—‹ToMV
  Add â‡ +â—‹ToMV
  Sub â‡ -â—‹ToMV

  Norm â‡ {âˆš|1âŠ‘ConjugateâŠ¸MulËœğ•©}
  Normalize â‡ DivâŸœNorm
  
}

